<!DOCTYPE html>
<html lang="zh-CN">
{% load static %}
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Lei Shi">
    <meta http-equiv="Cache-Control" content="o-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta content="" name="author">

    <link rel="stylesheet" href="../static/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../static/highlight.js/9.8.0/monokai-sublime.min.css">
    <link rel="stylesheet" href="../static/app/css/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/app/css/libs/katex/0.6.0/katex.min.css">
    <link rel="stylesheet" href="../static/app/css/libs/videojs/5.11.7/video-js.min.css">
    <link rel="stylesheet" href="../static/app/css/dest/styles.css?=2016121272249">
    <link rel="stylesheet" data-name="vs/editor/editor.main" href="../static/monaco/min/vs/editor/editor.main.css">

</head>

<body>

<nav class="navbar navbar-default navbar-fixed-top header">
    <div class="container">
        <div class="navbar-header">p
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#header-navbar-collapse" aria-expanded="false">
            </button>
        </div>
        <div class="collapse navbar-collapse" id="header-navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a href="/index">首页</a>
                </li>
                <li class="dropdown active">
                    <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">
                        课程
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="active" href="#">全部课程</a></li>
                        <li><a class="" href="#">即将上线</a></li>
                    </ul>
                </li>
                <li class="active">
                    <a href="#">讨论区</a>
                </li>

            </ul>
            <div class="navbar-right btns">
                <a class="btn btn-default navbar-btn sign-in" data-sign="signin" href="#sign-modal" data-toggle="modal">登录</a>
                <a class="btn btn-default navbar-btn sign-up" data-sign="signup" href="#sign-modal" data-toggle="modal">注册</a>
            </div>
            <form class="navbar-form navbar-right" action="#" method="get" role="search">
                <div class="form-group">
                    <input type="text" class="form-control" name="search" autocomplete="off" placeholder="搜索 课程/问答">
                </div>
            </form>
        </div>
    </div>
</nav>


<div class="container layout layout-margin-top">
    <ol class="breadcrumb">
        <li><a href="#">全部实验</a></li>
        <li>
            <a href="#">{{ id }}</a>
        </li>
        <li class="active">
            <a href="#">
                {{ title }}
            </a>
        </li>
    </ol>
    <div class="col-md-8 layout-body"
         style="padding: 5px;border:1px solid #000;flex-direction: column;">
        <div class="btn col-md-2 col-xs-3 btn-default" style="color:#ff4d4f;margin-left: 10px;float: right"><i
                class="fa fa-save"></i>下载代码
        </div>
        <div class="btn col-md-2 col-xs-3 btn-default" style="color:#1890ff;margin-left: 10px;float: right"><i
                class="fa fa-play"></i>执行代码
        </div>
        <div class="btn col-md-2 col-xs-3 btn-default" style="color:#f6c630;margin-left: 10px;float: right"><i
                class="fa fa-code"></i>添加输入
        </div>


        <div id="monaco"
             style="margin-top:5.5%;height: 500px;border-width:1px 0 0 0;border-style: solid; border-color: #000;"></div>
    </div>
    <div class="col-md-4 layout-body"
         style="height:553px;padding: 5px;border-width:1px 1px 1px 0px;border-style: solid; border-color: #000;flex-direction: column;">
        <div class="col-md-4 col-xs-5" style="color:#1890ff;margin-left: 10px;padding-top: 6px;font-size: 17px">
            <i class="fa fa-lightbulb-o"></i>执行结果
        </div>
        <div style="margin-top:10.7%;height: 500px;border-width:1px 0 0 0;border-style: solid; border-color: #000;"></div>
    </div>
</div>
<div class="footer">
    <div class="text-center copyright">
        <span>Copyright @2013-2016 在线教育</span>
        <span class="ver-line"> | </span>
        <a href="#" target="_blank">蜀ICP备00000000号</a>
    </div>
</div>
<script src="../static/jquery/2.2.4/jquery.min.js"></script>
<script src="../static/ace/1.2.5/ace.js"></script>
<script src="../static/aliyun/aliyun-oss-sdk-4.3.0.min.js"></script>
<script src="../static/highlight.js/9.8.0/highlight.min.js"></script>
<script src="../static/jspdf/1.2.61/jspdf.min.js"></script>
<script src="../static/plupload/2.1.9/js/plupload.full.min.js"></script>
<script src="../static/zeroclipboard/2.2.0/ZeroClipboard.min.js"></script>
<script src="../static/videojs/video.min.js"></script>
<script src="../static/bootstrap-tour/0.11.0/js/bootstrap-tour.min.js"></script>
<script src="../static/bootstrap-table/1.11.0/bootstrap-table.min.js"></script>
<script src="../static/bootstrap-table/1.11.0/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="../static/bootstrap-table/1.11.0/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>
<script src="../static/ravenjs/3.7.0/raven.min.js"></script>

<script src="../static/monaco/min/vs/loader.js"></script>
<script src="../static/monaco/min/vs/editor/editor.main.nls.js"></script>
<script src="../static/monaco/min/vs/editor/editor.main.js"></script>
<script src="../static/monaco/min/vs/base/worker/workerMain.js"></script>

<script>
    //创建monaco编辑器
    $(function () {
        var editor = null;
        require.config({paths: {'vs': '../static/monaco/min/vs'}});
        require(['vs/editor/editor.main'], function () {
            // 定义编辑器主题
            editor = monaco.editor.create(document.getElementById('monaco'), {
                //编辑器中显示的初始值，可以自己调整
                value: [
                    'from Tkinter import *\n' +
                    'import Pmw, string\n' +
                    'class SLabel(Frame):\n' +
                    '    """ SLabel defines a 2-sided label within a Frame. The\n' +
                    '        left hand label has blue letters the right has white letters """\n' +
                    '    def __init__(self, master, leftl, rightl):\n' +
                    '        Frame.__init__(self, master, bg="gray40")\n' +
                    '        self.pack(side=LEFT, expand=YES, fill=BOTH)\n' +
                    '        Label(self, text=leftl, fg="steelblue1",\n' +
                    '                     font=("arial", 6, "bold"), width=5, bg="gray40").pack(\n' +
                    '                         side=LEFT, expand=YES, fill=BOTH)\n' +
                    '        Label(self, text=rightl, fg="white",\n' +
                    '                     font=("arial", 6, "bold"), width=1, bg="gray40").pack(\n' +
                    '                         side=RIGHT, expand=YES, fill=BOTH)'
                ].join('\n'),
                //语言类型
                language: 'python',
                theme: 'vs',
                overviewRulerBorder: false
            });
        });
        //Ajax发送请求
        $('.btn-run').on('click', function () {
            //获取编辑页面中的值
            const text = editor.getValue();
            $.ajax({
                cache: false,
                type: "POST",
                url: "#",
                data: {"text": text},
                async: true,
                beforeSend: function (xhr, settings) {
                    xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");
                },
                success: function (data) {
                    if (data.status == 'fail') {
                        if (data.result == '') {
                            alert('当前代码无效')
                        } else {
                            alert('错误')
                        }
                    } else if (data.status == 'success') {
                        alert(data.result)
                    }
                },
            })
        })
    })
</script>
</body>
</html>